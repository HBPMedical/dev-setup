machine:
  python:
    version: 2.7.10
  services: []
  #  - docker

dependencies:
  #cache_directories:
  #  - "~/docker"

  override:
    - pip install pre-commit ansible-lint
    - sudo apt-add-repository -y ppa:brightbox/ruby-ng
    - sudo apt-get update
    - sudo apt-get install -y ruby2.3

checkout:
  post:
    - rm -rf * .git* .pre-commit-config.yaml .not-used
    - git clone git@github.com:LREN-CHUV/dev-setup.git .
    - git submodule sync
    - git submodule update --init

test:
    override:
        - pre-commit install
        - pre-commit run --all-files
        - ./common/scripts/bootstrap.sh --skip-git-crypt
        - ./setup.sh All Standard
        - ./setup.sh All Hipster
